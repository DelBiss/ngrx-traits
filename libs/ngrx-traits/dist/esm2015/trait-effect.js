import { Injectable } from '@angular/core';
import { takeUntil } from 'rxjs/operators';
import { Actions, ofType } from '@ngrx/effects';
import { Store } from '@ngrx/store';
export class TraitEffect {
  constructor(actions$, store) {
    this.actions$ = actions$;
    this.store = store;
    this.name = this.constructor.name;
    this.componentId = '';
  }
  ngrxOnIdentifyEffects() {
    return this.componentId ? this.name + this.componentId : '';
  }
  ngrxOnRunEffects(resolvedEffects$) {
    return this.componentId
      ? resolvedEffects$.pipe(
          takeUntil(
            this.actions$.pipe(ofType(getDestroyActionName(this.componentId)))
          )
        )
      : resolvedEffects$;
  }
}
TraitEffect.decorators = [{ type: Injectable }];
TraitEffect.ctorParameters = () => [{ type: Actions }, { type: Store }];
export function getDestroyActionName(id) {
  return `[${id}] Destroyed`;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhaXQtZWZmZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xpYi90cmFpdC1lZmZlY3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDM0MsT0FBTyxFQUNMLE9BQU8sRUFDUCxNQUFNLEdBR1AsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUlwQyxNQUFNLE9BQU8sV0FBVztJQUd0QixZQUNZLFFBQWlCLEVBQ2pCLEtBQWlCO1FBRGpCLGFBQVEsR0FBUixRQUFRLENBQVM7UUFDakIsVUFBSyxHQUFMLEtBQUssQ0FBWTtRQUpyQixTQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUM7UUFDOUIsZ0JBQVcsR0FBRyxFQUFFLENBQUM7SUFJckIsQ0FBQztJQUVKLHFCQUFxQjtRQUNuQixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQzlELENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxnQkFBaUM7UUFDaEQsT0FBTyxJQUFJLENBQUMsV0FBVztZQUNyQixDQUFDLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUNuQixTQUFTLENBQ1AsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQ25FLENBQ0Y7WUFDSCxDQUFDLENBQUMsZ0JBQWdCLENBQUM7SUFDdkIsQ0FBQzs7O1lBckJGLFVBQVU7OztZQVJULE9BQU87WUFLQSxLQUFLOztBQTJCZCxNQUFNLFVBQVUsb0JBQW9CLENBQUMsRUFBVTtJQUM3QyxPQUFPLElBQUksRUFBRSxhQUFhLENBQUM7QUFDN0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7XG4gIEFjdGlvbnMsXG4gIG9mVHlwZSxcbiAgT25JZGVudGlmeUVmZmVjdHMsXG4gIE9uUnVuRWZmZWN0cyxcbn0gZnJvbSAnQG5ncngvZWZmZWN0cyc7XG5pbXBvcnQgeyBTdG9yZSB9IGZyb20gJ0BuZ3J4L3N0b3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFRyYWl0RWZmZWN0IGltcGxlbWVudHMgT25JZGVudGlmeUVmZmVjdHMsIE9uUnVuRWZmZWN0cyB7XG4gIHByaXZhdGUgbmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgcHVibGljIGNvbXBvbmVudElkID0gJyc7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgYWN0aW9ucyQ6IEFjdGlvbnMsXG4gICAgcHJvdGVjdGVkIHN0b3JlOiBTdG9yZTxhbnk+LFxuICApIHt9XG5cbiAgbmdyeE9uSWRlbnRpZnlFZmZlY3RzKCkge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudElkID8gdGhpcy5uYW1lICsgdGhpcy5jb21wb25lbnRJZCA6ICcnO1xuICB9XG5cbiAgbmdyeE9uUnVuRWZmZWN0cyhyZXNvbHZlZEVmZmVjdHMkOiBPYnNlcnZhYmxlPGFueT4pIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRJZFxuICAgICAgPyByZXNvbHZlZEVmZmVjdHMkLnBpcGUoXG4gICAgICAgICAgdGFrZVVudGlsKFxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zJC5waXBlKG9mVHlwZShnZXREZXN0cm95QWN0aW9uTmFtZSh0aGlzLmNvbXBvbmVudElkKSkpLFxuICAgICAgICAgICksXG4gICAgICAgIClcbiAgICAgIDogcmVzb2x2ZWRFZmZlY3RzJDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVzdHJveUFjdGlvbk5hbWUoaWQ6IHN0cmluZykge1xuICByZXR1cm4gYFske2lkfV0gRGVzdHJveWVkYDtcbn1cbiJdfQ==
