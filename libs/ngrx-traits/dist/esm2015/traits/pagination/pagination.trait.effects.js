import { Injectable } from '@angular/core';
import { TraitEffect } from 'ngrx-traits';
import { concatMap, concatMapTo, filter, first, map } from 'rxjs/operators';
import { concatLatestFrom, createEffect, ofType } from '@ngrx/effects';
export function createPaginationTraitEffects(allActions, allSelectors) {
  class PaginationEffect extends TraitEffect {
    constructor() {
      super(...arguments);
      this.loadPage$ = createEffect(() => {
        return this.actions$.pipe(
          ofType(allActions.loadPage),
          concatLatestFrom(() => this.store.select(allSelectors.isPageInCache)),
          map(([{ forceLoad }, isInCache]) =>
            !forceLoad && isInCache
              ? allActions.loadPageSuccess()
              : allActions.fetch()
          )
        );
      });
      this.preloadNextPage$ = createEffect(() => {
        return this.actions$.pipe(
          ofType(allActions.loadPageSuccess),
          concatMapTo(
            this.store.select(allSelectors.selectPageInfo).pipe(first())
          ),
          filter(
            (pageInfo) =>
              !!pageInfo.total &&
              pageInfo.hasNext &&
              pageInfo.cacheType !== 'full'
          ),
          concatMap((pageInfo) =>
            this.store
              .select(allSelectors.isPageInCache, {
                page: pageInfo.pageIndex + 1,
              })
              .pipe(
                first(),
                map((isInCache) => (!isInCache && pageInfo) || undefined)
              )
          ),
          filter((pageInfo) => !!pageInfo),
          concatMap((pageInfo) => [
            allActions.setRequestPage({ index: pageInfo.pageIndex + 1 }),
            allActions.fetch(),
          ])
        );
      });
      this.loadFirstPage$ = createEffect(() => {
        return this.actions$.pipe(
          ofType(allActions.loadFirstPage),
          map(() => allActions.loadPage({ index: 0 }))
        );
      });
      this.loadPreviousPage$ = createEffect(() => {
        return this.actions$.pipe(
          ofType(allActions.loadPreviousPage),
          concatMapTo(
            this.store.select(allSelectors.selectPageInfo).pipe(first())
          ),
          map((page) =>
            page.hasPrevious
              ? allActions.loadPage({ index: page.pageIndex - 1 })
              : allActions.loadPageFail()
          )
        );
      });
      this.loadNextPage$ = createEffect(() => {
        return this.actions$.pipe(
          ofType(allActions.loadNextPage),
          concatMapTo(
            this.store.select(allSelectors.selectPageInfo).pipe(first())
          ),
          map((page) =>
            page.hasNext
              ? allActions.loadPage({ index: page.pageIndex + 1 })
              : allActions.loadPageFail()
          )
        );
      });
      this.loadLastPage$ = createEffect(() => {
        return this.actions$.pipe(
          ofType(allActions.loadLastPage),
          concatMapTo(
            this.store.select(allSelectors.selectPageInfo).pipe(first())
          ),
          map((page) =>
            page.hasNext && page.pagesCount
              ? allActions.loadPage({ index: page.pagesCount - 1 })
              : allActions.loadPageFail()
          )
        );
      });
    }
  }
  PaginationEffect.decorators = [{ type: Injectable }];
  return [PaginationEffect];
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi50cmFpdC5lZmZlY3RzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdHJhaXRzL3NyYy9wYWdpbmF0aW9uL3BhZ2luYXRpb24udHJhaXQuZWZmZWN0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDMUMsT0FBTyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM1RSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQVF2RSxNQUFNLFVBQVUsNEJBQTRCLENBQzFDLFVBR3FCLEVBQ3JCLFlBQXlFO0lBRXpFLE1BQ00sZ0JBQWlCLFNBQVEsV0FBVztRQUQxQzs7WUFFRSxjQUFTLEdBQUcsWUFBWSxDQUFDLEdBQUcsRUFBRTtnQkFDNUIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FDdkIsTUFBTSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsRUFDM0IsZ0JBQWdCLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQ3JFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLEVBQUUsRUFBRSxTQUFTLENBQUMsRUFBRSxFQUFFLENBQ2pDLENBQUMsU0FBUyxJQUFJLFNBQVM7b0JBQ3JCLENBQUMsQ0FBQyxVQUFVLENBQUMsZUFBZSxFQUFFO29CQUM5QixDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUN2QixDQUNGLENBQUM7WUFDSixDQUFDLENBQUMsQ0FBQztZQUVILHFCQUFnQixHQUFHLFlBQVksQ0FBQyxH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Q0FBQyxTQUFTLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0JBQ3BELENBQUMsQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLENBQzlCLENBQ0YsQ0FBQztZQUNKLENBQUMsQ0FBQyxDQUFDO1lBRUgsa0JBQWEsR0FBRyxZQUFZLENBQUMsR0FBRyxFQUFFO2dCQUNoQyxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUN2QixNQUFNLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxFQUMvQixXQUFXLENBQ1QsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUM3RCxFQUNELEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQ1gsSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsVUFBVTtvQkFDN0IsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUUsQ0FBQztvQkFDckQsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxZQUFZLEVBQUUsQ0FDOUIsQ0FDRixDQUFDO1lBQ0osQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDOzs7Z0JBNUZBLFVBQVU7O0lBNkZYLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQzVCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUcmFpdEVmZmVjdCB9IGZyb20gJ25ncngtdHJhaXRzJztcbmltcG9ydCB7IGNvbmNhdE1hcCwgY29uY2F0TWFwVG8sIGZpbHRlciwgZmlyc3QsIG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IGNvbmNhdExhdGVzdEZyb20sIGNyZWF0ZUVmZmVjdCwgb2ZUeXBlIH0gZnJvbSAnQG5ncngvZWZmZWN0cyc7XG5pbXBvcnQgeyBGaWx0ZXJBY3Rpb25zIH0gZnJvbSAnLi4vZmlsdGVyL2ZpbHRlci5tb2RlbCc7XG5pbXBvcnQgeyBMb2FkRW50aXRpZXNBY3Rpb25zLCBMb2FkRW50aXRpZXNTZWxlY3RvcnMgfSBmcm9tICcuLi9sb2FkLWVudGl0aWVzJztcbmltcG9ydCB7IENydWRBY3Rpb25zIH0gZnJvbSAnLi4vY3J1ZC9jcnVkLm1vZGVsJztcbmltcG9ydCB7IFBhZ2luYXRpb25TZWxlY3RvcnMgfSBmcm9tICcuL3BhZ2luYXRpb24ubW9kZWwnO1xuaW1wb3J0IHsgVHlwZSB9IGZyb20gJ25ncngtdHJhaXRzJztcbmltcG9ydCB7IMafUGFnaW5hdGlvbkFjdGlvbnMgfSBmcm9tICcuL3BhZ2luYXRpb24ubW9kZWwuaW50ZXJuYWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUGFnaW5hdGlvblRyYWl0RWZmZWN0czxFbnRpdHk+KFxuICBhbGxBY3Rpb25zOiDGn1BhZ2luYXRpb25BY3Rpb25zICZcbiAgICBGaWx0ZXJBY3Rpb25zPEVudGl0eT4gJlxuICAgIExvYWRFbnRpdGllc0FjdGlvbnM8RW50aXR5PiAmXG4gICAgQ3J1ZEFjdGlvbnM8RW50aXR5PixcbiAgYWxsU2VsZWN0b3JzOiBMb2FkRW50aXRpZXNTZWxlY3RvcnM8RW50aXR5PiAmIFBhZ2luYXRpb25TZWxlY3RvcnM8RW50aXR5Pixcbik6IFR5cGU8VHJhaXRFZmZlY3Q+W10ge1xuICBASW5qZWN0YWJsZSgpXG4gIGNsYXNzIFBhZ2luYXRpb25FZmZlY3QgZXh0ZW5kcyBUcmFpdEVmZmVjdCB7XG4gICAgbG9hZFBhZ2UkID0gY3JlYXRlRWZmZWN0KCgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmFjdGlvbnMkLnBpcGUoXG4gICAgICAgIG9mVHlwZShhbGxBY3Rpb25zLmxvYWRQYWdlKSxcbiAgICAgICAgY29uY2F0TGF0ZXN0RnJvbSgoKSA9PiB0aGlzLnN0b3JlLnNlbGVjdChhbGxTZWxlY3RvcnMuaXNQYWdlSW5DYWNoZSkpLFxuICAgICAgICBtYXAoKFt7IGZvcmNlTG9hZCB9LCBpc0luQ2FjaGVdKSA9PlxuICAgICAgICAgICFmb3JjZUxvYWQgJiYgaXNJbkNhY2hlXG4gICAgICAgICAgICA/IGFsbEFjdGlvbnMubG9hZFBhZ2VTdWNjZXNzKClcbiAgICAgICAgICAgIDogYWxsQWN0aW9ucy5mZXRjaCgpLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHByZWxvYWROZXh0UGFnZSQgPSBjcmVhdGVFZmZlY3QoKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYWN0aW9ucyQucGlwZShcbiAgICAgICAgb2ZUeXBlKGFsbEFjdGlvbnMubG9hZFBhZ2VTdWNjZXNzKSxcbiAgICAgICAgY29uY2F0TWFwVG8oXG4gICAgICAgICAgdGhpcy5zdG9yZS5zZWxlY3QoYWxsU2VsZWN0b3JzLnNlbGVjdFBhZ2VJbmZvKS5waXBlKGZpcnN0KCkpLFxuICAgICAgICApLFxuICAgICAgICBmaWx0ZXIoXG4gICAgICAgICAgKHBhZ2VJbmZvKSA9PlxuICAgICAgICAgICAgISFwYWdlSW5mby50b3RhbCAmJlxuICAgICAgICAgICAgcGFnZUluZm8uaGFzTmV4dCAmJlxuICAgICAgICAgICAgcGFnZUluZm8uY2FjaGVUeXBlICE9PSAnZnVsbCcsXG4gICAgICAgICksXG4gICAgICAgIGNvbmNhdE1hcCgocGFnZUluZm8pID0+XG4gICAgICAgICAgdGhpcy5zdG9yZVxuICAgICAgICAgICAgLnNlbGVjdChhbGxTZWxlY3RvcnMuaXNQYWdlSW5DYWNoZSwge1xuICAgICAgICAgICAgICBwYWdlOiBwYWdlSW5mby5wYWdlSW5kZXggKyAxLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5waXBlKFxuICAgICAgICAgICAgICBmaXJzdCgpLFxuICAgICAgICAgICAgICBtYXAoKGlzSW5DYWNoZSkgPT4gKCFpc0luQ2FjaGUgJiYgcGFnZUluZm8pIHx8IHVuZGVmaW5lZCksXG4gICAgICAgICAgICApLFxuICAgICAgICApLFxuICAgICAgICBmaWx0ZXIoKHBhZ2VJbmZvKSA9PiAhIXBhZ2VJbmZvKSxcbiAgICAgICAgY29uY2F0TWFwKChwYWdlSW5mbykgPT4gW1xuICAgICAgICAgIGFsbEFjdGlvbnMuc2V0UmVxdWVzdFBhZ2UoeyBpbmRleDogcGFnZUluZm8hLnBhZ2VJbmRleCArIDEgfSksXG4gICAgICAgICAgYWxsQWN0aW9ucy5mZXRjaCgpLFxuICAgICAgICBdKSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBsb2FkRmlyc3RQYWdlJCA9IGNyZWF0ZUVmZmVjdCgoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rpb25zJC5waXBlKFxuICAgICAgICBvZlR5cGUoYWxsQWN0aW9ucy5sb2FkRmlyc3RQYWdlKSxcbiAgICAgICAgbWFwKCgpID0+IGFsbEFjdGlvbnMubG9hZFBhZ2UoeyBpbmRleDogMCB9KSksXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgbG9hZFByZXZpb3VzUGFnZSQgPSBjcmVhdGVFZmZlY3QoKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYWN0aW9ucyQucGlwZShcbiAgICAgICAgb2ZUeXBlKGFsbEFjdGlvbnMubG9hZFByZXZpb3VzUGFnZSksXG4gICAgICAgIGNvbmNhdE1hcFRvKFxuICAgICAgICAgIHRoaXMuc3RvcmUuc2VsZWN0KGFsbFNlbGVjdG9ycy5zZWxlY3RQYWdlSW5mbykucGlwZShmaXJzdCgpKSxcbiAgICAgICAgKSxcbiAgICAgICAgbWFwKChwYWdlKSA9PlxuICAgICAgICAgIHBhZ2UuaGFzUHJldmlvdXNcbiAgICAgICAgICAgID8gYWxsQWN0aW9ucy5sb2FkUGFnZSh7IGluZGV4OiBwYWdlLnBhZ2VJbmRleCAtIDEgfSlcbiAgICAgICAgICAgIDogYWxsQWN0aW9ucy5sb2FkUGFnZUZhaWwoKSxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBsb2FkTmV4dFBhZ2UkID0gY3JlYXRlRWZmZWN0KCgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmFjdGlvbnMkLnBpcGUoXG4gICAgICAgIG9mVHlwZShhbGxBY3Rpb25zLmxvYWROZXh0UGFnZSksXG4gICAgICAgIGNvbmNhdE1hcFRvKFxuICAgICAgICAgIHRoaXMuc3RvcmUuc2VsZWN0KGFsbFNlbGVjdG9ycy5zZWxlY3RQYWdlSW5mbykucGlwZShmaXJzdCgpKSxcbiAgICAgICAgKSxcbiAgICAgICAgbWFwKChwYWdlKSA9PlxuICAgICAgICAgIHBhZ2UuaGFzTmV4dFxuICAgICAgICAgICAgPyBhbGxBY3Rpb25zLmxvYWRQYWdlKHsgaW5kZXg6IHBhZ2UucGFnZUluZGV4ICsgMSB9KVxuICAgICAgICAgICAgOiBhbGxBY3Rpb25zLmxvYWRQYWdlRmFpbCgpLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGxvYWRMYXN0UGFnZSQgPSBjcmVhdGVFZmZlY3QoKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYWN0aW9ucyQucGlwZShcbiAgICAgICAgb2ZUeXBlKGFsbEFjdGlvbnMubG9hZExhc3RQYWdlKSxcbiAgICAgICAgY29uY2F0TWFwVG8oXG4gICAgICAgICAgdGhpcy5zdG9yZS5zZWxlY3QoYWxsU2VsZWN0b3JzLnNlbGVjdFBhZ2VJbmZvKS5waXBlKGZpcnN0KCkpLFxuICAgICAgICApLFxuICAgICAgICBtYXAoKHBhZ2UpID0+XG4gICAgICAgICAgcGFnZS5oYXNOZXh0ICYmIHBhZ2UucGFnZXNDb3VudFxuICAgICAgICAgICAgPyBhbGxBY3Rpb25zLmxvYWRQYWdlKHsgaW5kZXg6IHBhZ2UucGFnZXNDb3VudCAtIDEgfSlcbiAgICAgICAgICAgIDogYWxsQWN0aW9ucy5sb2FkUGFnZUZhaWwoKSxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIFtQYWdpbmF0aW9uRWZmZWN0XTtcbn1cbiJdfQ==
