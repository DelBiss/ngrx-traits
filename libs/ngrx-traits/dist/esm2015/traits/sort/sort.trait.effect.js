import { Injectable } from '@angular/core';
import { TraitEffect } from 'ngrx-traits';
import { createEffect, ofType } from '@ngrx/effects';
import { concatMap } from 'rxjs/operators';
export function createSortTraitEffect(allActions, allConfigs) {
  const { remote } = allConfigs.sort;
  class SortEffect extends TraitEffect {
    constructor() {
      super(...arguments);
      this.remoteSort$ = createEffect(() => {
        return this.actions$.pipe(
          ofType(allActions.sort, allActions.resetSort),
          concatMap(() =>
            allActions.loadFirstPage
              ? [allActions.clearPagesCache(), allActions.loadFirstPage()]
              : [allActions.fetch()]
          )
        );
      });
    }
  }
  SortEffect.decorators = [{ type: Injectable }];
  return remote ? [SortEffect] : [];
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ydC50cmFpdC5lZmZlY3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi90cmFpdHMvc3JjL3NvcnQvc29ydC50cmFpdC5lZmZlY3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQzFDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3JELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQVMzQyxNQUFNLFVBQVUscUJBQXFCLENBQ25DLFVBRW1CLEVBQ25CLFVBQXFFO0lBRXJFLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxVQUFVLENBQUMsSUFBSyxDQUFDO0lBRXBDLE1BQ00sVUFBVyxTQUFRLFdBQVc7UUFEcEM7O1lBRUUsZ0JBQVcsR0FBRyxZQUFZLENBQUMsR0FBRyxFQUFFO2dCQUM5QixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUN2QixNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsU0FBUyxDQUFDLEVBQzdDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FDYixVQUFVLENBQUMsYUFBYTtvQkFDdEIsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLGVBQWUsRUFBRSxFQUFFLFVBQVUsQ0FBQyxhQUFhLEVBQUUsQ0FBQztvQkFDNUQsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQ3pCLENBQ0YsQ0FBQztZQUNKLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQzs7O2dCQVpBLFVBQVU7O0lBYVgsT0FBTyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUNwQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVHJhaXRFZmZlY3QgfSBmcm9tICduZ3J4LXRyYWl0cyc7XG5pbXBvcnQgeyBjcmVhdGVFZmZlY3QsIG9mVHlwZSB9IGZyb20gJ0BuZ3J4L2VmZmVjdHMnO1xuaW1wb3J0IHsgY29uY2F0TWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgVHlwZSB9IGZyb20gJ25ncngtdHJhaXRzJztcbmltcG9ydCB7XG4gIExvYWRFbnRpdGllc0FjdGlvbnMsXG4gIExvYWRFbnRpdGllc0tleWVkQ29uZmlnLFxufSBmcm9tICcuLi9sb2FkLWVudGl0aWVzL2xvYWQtZW50aXRpZXMubW9kZWwnO1xuaW1wb3J0IHsgU29ydEFjdGlvbnMsIFNvcnRLZXllZENvbmZpZyB9IGZyb20gJy4vc29ydC5tb2RlbCc7XG5pbXBvcnQgeyBQYWdpbmF0aW9uQWN0aW9ucyB9IGZyb20gJy4uL3BhZ2luYXRpb24vcGFnaW5hdGlvbi5tb2RlbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTb3J0VHJhaXRFZmZlY3Q8RW50aXR5PihcbiAgYWxsQWN0aW9uczogTG9hZEVudGl0aWVzQWN0aW9uczxFbnRpdHk+ICZcbiAgICBTb3J0QWN0aW9uczxFbnRpdHk+ICZcbiAgICBQYWdpbmF0aW9uQWN0aW9ucyxcbiAgYWxsQ29uZmlnczogTG9hZEVudGl0aWVzS2V5ZWRDb25maWc8RW50aXR5PiAmIFNvcnRLZXllZENvbmZpZzxFbnRpdHk+LFxuKTogVHlwZTxUcmFpdEVmZmVjdD5bXSB7XG4gIGNvbnN0IHsgcmVtb3RlIH0gPSBhbGxDb25maWdzLnNvcnQhO1xuXG4gIEBJbmplY3RhYmxlKClcbiAgY2xhc3MgU29ydEVmZmVjdCBleHRlbmRzIFRyYWl0RWZmZWN0IHtcbiAgICByZW1vdGVTb3J0JCA9IGNyZWF0ZUVmZmVjdCgoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rpb25zJC5waXBlKFxuICAgICAgICBvZlR5cGUoYWxsQWN0aW9ucy5zb3J0LCBhbGxBY3Rpb25zLnJlc2V0U29ydCksXG4gICAgICAgIGNvbmNhdE1hcCgoKSA9PlxuICAgICAgICAgIGFsbEFjdGlvbnMubG9hZEZpcnN0UGFnZVxuICAgICAgICAgICAgPyBbYWxsQWN0aW9ucy5jbGVhclBhZ2VzQ2FjaGUoKSwgYWxsQWN0aW9ucy5sb2FkRmlyc3RQYWdlKCldXG4gICAgICAgICAgICA6IFthbGxBY3Rpb25zLmZldGNoKCldLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcmVtb3RlID8gW1NvcnRFZmZlY3RdIDogW107XG59XG4iXX0=
